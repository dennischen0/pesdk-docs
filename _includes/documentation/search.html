{% assign search_index_url = '/guides/html5/v3_6/search.json' %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.0.1/lunr.min.js"></script>
<script>
  var url = "{{search_index_url}}"
  var searchEngine = fetch(url, {method: 'get'})
    .then(function(response) {
      return response.json();
    }).then(function(data){
      var documents = data
      
      return lunr(function () {
        this.ref('id')
        this.field('content')
        this.field('description')
        this.field('title')

        documents.forEach(function (doc) { this.add(doc)}, this)
      })
    } )

  searchEngine.then( function (engine){
    var searchForms = document.getElementsByName('searchForm')
    var searchForm = searchForms[0]
    searchForm.onsubmit = function(){
      var searchInputs = searchForm.querySelectorAll('input[type=search]')
      var searchInput = searchInputs[0]
      var searchValue = searchInput.value
      var searchResult = engine.search(searchValue)
      debugger  
    }
  })
  
</script>

<div class="documentation-search">
    <form class="documentation-search__item" action="#" target="#" name="searchForm" method="get">
      <input type="search" placeholder="Search..."> 
      </input>
      <input type="submit" tabindex="-1" />
      </input>
    </form>
</div>